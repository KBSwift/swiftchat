@model SwiftChat.Models.ApplicationUser
@{
    ViewData["Title"] = "Profile Information";
}

<h2>@ViewData["Title"]</h2>

<form asp-controller="User" asp-action="UpdateProfile" method="post" id="profileForm">
    <div>
        <div>
            <h1>@Model.UserName</h1>
           @*  <label>Name:</label> will allow editing username in future
            <input type="text" value="@Model.UserName" disabled class="profile-field" /> *@
        </div>
        <div>
            <label>Profile Picture:</label>
            <img src="@Model.ProfilePicture" alt="Profile Picture" />
            <!-- Need to add logic for changing profile pictures here -->
        </div>
        <div>
            <label>About me:</label><br />
            <textarea asp-for="Bio" disabled class="profile-field"></textarea>
        </div>
        <div>
            <label>Birthday</label>
            @{
                var dob = Model.DateOfBirth != default ? Model.DateOfBirth.ToString("yyyy-MM-dd") : "";
            }
            <input type="date" asp-for="DateOfBirth" value="@dob" disabled class="profile-field" />
        </div>
        <div>
            <label>Email:</label>
            <input asp-for="Email" disabled class="profile-field" />
        </div>
        
        <button type="button" onclick="toggleEdit()" id="editButton">Update Information</button>
        <button type="submit" disabled id="saveButton">Save Changes</button>
    </div>
</form>

@section Scripts {
    <script>
        function toggleEdit() {
            var fields = document.getElementsByClassName('profile-field');
            for (var i = 0; i < fields.length; i++) {
                fields[i].disabled = !fields[i].disabled;
            }
            document.getElementById('saveButton').disabled = !document.getElementById('saveButton').disabled;
            document.getElementById('editButton').style.display = 'none';
        }
    </script>
}
